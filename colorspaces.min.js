// Generated by CoffeeScript 1.3.1
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;c=function(a,b){var c,d,e,f;d=0;for(c=e=0,f=a.length-1;0<=f?e<=f:e>=f;c=0<=f?++e:--e)d+=a[c]*b[c];return d},o=function(a,b){var c;return c=Math.pow(10,b),Math.round(a*c)/c},s=function(a,b){var c,d,e,f;a=function(){var b,c,e;e=[];for(b=0,c=a.length;b<c;b++)d=a[b],e.push(o(d,3));return e}();for(c=e=0,f=a.length-1;0<=f?e<=f:e>=f;c=0<=f?++e:--e)if(a[c]<b[c][0]||a[c]>b[c][1])return!1;return!0},k=.95047,l=1,m=1.08883,i=4*k/(k+15*l+3*m),j=9*l/(k+15*l+3*m),f=.008856,g=903.3,d=function(a){return a>f?Math.pow(a,1/3):7.787*a+16/116},e=function(a){return Math.pow(a,3)>f?Math.pow(a,3):(116*a-16)/g},a={CIEXYZ:{},CIExyY:{},CIELAB:{},CIELCH:{},CIELUV:{},CIELCHuv:{},sRGB:{},hex:{}},a.CIEXYZ.sRGB=function(a){var b,d,e,f,g;return d=[[3.2406,-1.5372,-0.4986],[-0.9689,1.8758,.0415],[.0557,-0.204,1.057]],b=function(a){var b;return b=.055,a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055},g=b(c(d[0],a)),f=b(c(d[1],a)),e=b(c(d[2],a)),[g,f,e]},a.sRGB.CIEXYZ=function(a){var b,d,e,f,g,h,i,j,k;return h=a[0],g=a[1],f=a[2],e=function(a){var b;return b=.055,a>.04045?Math.pow((a+b)/(1+b),2.4):a/12.92},b=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],d=[e(h),e(g),e(f)],i=c(b[0],d),j=c(b[1],d),k=c(b[2],d),[i,j,k]},a.CIEXYZ.CIExyY=function(a){var b,c,d,e;return c=a[0],d=a[1],e=a[2],b=c+d+e,b===0?[0,0,d]:[c/b,d/b,d]},a.CIExyY.CIEXYZ=function(a){var b,c,d,e,f;return e=a[0],f=a[1],c=a[2],f===0?[0,0,0]:(b=e*c/f,d=(1-e-f)*c/f,[b,c,d])},a.CIEXYZ.CIELAB=function(a){var b,c,e,f,g,h,i,j,n;return g=a[0],h=a[1],i=a[2],b=d(g/k),c=d(h/l),e=d(i/m),f=116*c-16,j=500*(b-c),n=200*(c-e),[f,j,n]},a.CIELAB.CIEXYZ=function(a){var b,c,d,f,g,h,i,j,n;return f=a[0],j=a[1],n=a[2],c=(f+16)/116,d=c-n/200,b=j/500+c,g=k*e(b),h=l*e(c),i=m*e(d),[g,h,i]},a.CIEXYZ.CIELUV=function(a){var b,c,e,f,g,h,k,m;return h=a[0],k=a[1],m=a[2],b=4*h/(h+15*k+3*m),c=9*k/(h+15*k+3*m),e=116*d(k/l)-16,e===0?[0,0,0]:(f=13*e*(b-i),g=13*e*(c-j),[e,f,g])},a.CIELUV.CIEXYZ=function(a){var b,c,d,f,g,h,k,m,n;return f=a[0],g=a[1],h=a[2],f===0?[0,0,0]:(d=e((f+16)/116),b=g/(13*f)+i,c=h/(13*f)+j,m=d*l,k=0-9*m*b/((b-4)*c-b*c),n=(9*m-15*c*m-c*k)/(3*c),[k,m,n])},q=function(a){var b,c,d,e,f,g;return e=a[0],b=a[1],c=a[2],d=Math.pow(Math.pow(b,2)+Math.pow(c,2),.5),g=Math.atan2(c,b),f=g*360/2/Math.PI,f<0&&(f=360+f),[e,d,f]},a.CIELAB.CIELCH=q,a.CIELUV.CIELCHuv=q,h=function(a){var b,c,d,e,f,g;return e=a[0],d=a[1],f=a[2],g=f/360*2*Math.PI,b=Math.cos(g)*d,c=Math.sin(g)*d,[e,b,c]},a.CIELCH.CIELAB=h,a.CIELCHuv.CIELUV=h,p=function(a){var b,c,d,e,f,g,h;a=function(){var b,d,e;e=[];for(b=0,d=a.length;b<d;b++)c=a[b],e.push(o(c,3));return e}();for(d=0,f=a.length;d<f;d++){b=a[d];if(b<0||b>1)throw new Error("Illegal sRGB value")}h=[];for(e=0,g=a.length;e<g;e++)b=a[e],h.push(Math.round(b*255));return h},a.sRGB.hex=function(a){var b,c,d,e;c="#",a=p(a);for(d=0,e=a.length;d<e;d++)b=a[d],b=b.toString(16),b.length===1&&(b="0"+b),c+=b;return c},a.hex.sRGB=function(a){var b,c,d;return a.charAt(0)==="#"&&(a=a.substring(1,7)),d=a.substring(0,2),c=a.substring(2,4),b=a.substring(4,6),[d,c,b].map(function(a){return parseInt(a,16)/255})},b=function(b,c){var d,e,f;return f=[["CIELCH","CIELAB"],["CIELCHuv","CIELUV"],["hex","sRGB"],["CIExyY","CIEXYZ"],["CIELAB","CIEXYZ"],["CIELUV","CIEXYZ"],["sRGB","CIEXYZ"]],e=function(b,c,d){var f,g,h,i;return c===d?function(a){return a}:(i=b[0],f=i[0],h=i[1],c===f?(g=e(b.slice(1),h,d),function(b){return g(a[f][h](b))}):d===f?(g=e(b.slice(1),c,h),function(b){return a[h][f](g(b))}):(g=e(b.slice(1),c,d),g))},d=e(f,b,c),d},n={};try{r=require("stylus"),n=function(){var c,d;return d=function(){var b;b=[];for(c in a)c!=="sRGB"&&c!=="hex"&&b.push(c);return b}(),function(a){var c,e,f,g;g=[];for(e=0,f=d.length;e<f;e++)c=d[e],g.push(a.define(c,function(a){return function(c,d,e){var f,g,h,i;return f=b(a,"sRGB"),i=p(f([c.val,d.val,e.val])),h=i[0],g=i[1],d=i[2],new r.nodes.RGBA(h,g,d,1)}}(c)));return g}}}catch(t){}n.converter=b,n.make_color=function(a,c){return{as:function(d){var e;return e=b(a,d)(c),e},is_displayable:function(){var d;return d=b(a,"sRGB")(c),s(d,[[0,1],[0,1],[0,1]])},is_visible:function(){var d;return d=b(a,"CIEXYZ")(c),s(d,[[0,k],[0,l],[0,m]])}}},typeof module!="undefined"&&module!==null&&(module.exports=n),typeof jQuery!="undefined"&&jQuery!==null&&(jQuery.colorspaces=n)}).call(this);