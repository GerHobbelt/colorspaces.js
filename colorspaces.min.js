(function(){var a,b,c,d,e,f,g,h,i=Array.prototype.slice;c=function(a,b){var c,d,e;d=0;for(c=0,e=a.length-1;0>e?c>=e:c<=e;0>e?c--:c++)d+=a[c]*b[c];return d},h=[.95047,1,1.08883],d=.008856,e=903.3,a=function(a){return a<0&&(a=0),a>1&&(a=1),a},b={from_CIEXYZ:{to_hex:function(){var a,c,d,e;return c=1>arguments.length?[]:i.call(arguments,0),a=(d=b.from_CIEXYZ).to_sRGB.apply(d,c),(e=b.from_sRGB).to_hex.apply(e,a)},to_sRGB:function(){var a,b,d,e,f,g;return d=1>arguments.length?[]:i.call(arguments,0),b=[[3.2406,-1.5372,-0.4986],[-0.9689,1.8758,.0415],[.0557,-0.204,1.057]],a=function(a){var b;return b=.055,a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a},g=a(c(b[0],d)),f=a(c(b[1],d)),e=a(c(b[2],d)),[g,f,e]},to_CIExyY:function(a,b,c){var d;return d=a+b+c,d===0?[0,0,b]:[a/d,b/d,b]},to_CIELAB:function(a,b,c){var e,f,g,i,j,k,l;return e=function(a){return a>d?Math.pow(a,1/3):7.787*a+16/116},f=e(a/h[0]),g=e(b/h[1]),i=e(c/h[2]),j=116*g-16,k=500*(f-g),l=200*(g-i),[j,k,l]},to_CIELCH:function(){var a,c,d,e;return c=1>arguments.length?[]:i.call(arguments,0),a=(d=b.from_CIEXYZ).to_CIELAB.apply(d,c),(e=b.from_CIELAB).to_CIELCH.apply(e,a)},to_CIEXYZ:function(){var a;return a=1>arguments.length?[]:i.call(arguments,0),a}},from_sRGB:{to_CIEXYZ:function(a,b,d){var e,f,g,h,i,j;return g=function(a){var b;return b=.055,a>.04045?Math.pow((a+b)/(1+b),2.4):a/12.92},e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],f=[g(a),g(b),g(d)],h=c(e[0],f),i=c(e[1],f),j=c(e[2],f),[h,i,j]},to_hex:function(){var a,b,c,d,e;c=1>arguments.length?[]:i.call(arguments,0),b="#";for(d=0,e=c.length;d<e;d++)a=c[d],a=Math.round(a*255).toString(16),a.length===1&&(a="0"+a),b+=a;return b}},from_CIExyY:{to_CIEXYZ:function(a,b,c){var d,e;return b===0?[0,0,0]:(d=a*c/b,e=(1-a-b)*c/b,[d,c,e])}},from_CIELAB:{to_CIEXYZ:function(a,b,c){var f,g,i,j,k,l,m;return i=(a+16)/116,j=i-c/200,g=b/500+i,f=function(a){return Math.pow(a,3)>d?Math.pow(a,3):(116*a-16)/e},k=h[0]*f(g),l=h[1]*f(i),m=h[2]*f(j),[k,l,m]},to_CIELCH:function(a,b,c){var d,e,f;return d=Math.pow(Math.pow(b,2)+Math.pow(c,2),.5),f=Math.atan2(c,b),e=f*360/2/Math.PI,e<0&&(e=360+e),[a,d,e]}},from_CIELCH:{to_CIELAB:function(a,b,c){var d,e,f;return f=c/360*2*Math.PI,d=Math.cos(f)*b,e=Math.sin(f)*b,[a,d,e]},to_CIEXYZ:function(){var a,c,d,e;return c=1>arguments.length?[]:i.call(arguments,0),a=(d=b.from_CIELCH).to_CIELAB.apply(d,c),(e=b.from_CIELAB).to_CIEXYZ.apply(e,a)}},from_hex:{to_sRGB:function(a){var b,c,d;return a.charAt(0)==="#"&&(a=a.substring(1,7)),d=a.substring(0,2),c=a.substring(2,4),b=a.substring(4,6),[d,c,b].map(function(a){return parseInt(a,16)/255})},to_CIEXYZ:function(a){var c,d;return c=b.from_hex.to_sRGB(a),(d=b.from_sRGB).to_CIEXYZ.apply(d,c)}}},g=function(a,b){var c,d,e;if(a==="sRGB"){if(b.length!==3)return!1;for(d=0,e=b.length;d<e;d++){c=b[d];if(c<0||c>1)return!1}return!0}return!0},f=typeof exports!="undefined"&&exports!==null?exports:{},f.make_color=function(a,c){var d,e;a==="hex"&&(c=[c]);if(!g(c,a))throw"Color is out of the gamut of the given color space";return d=(e=b["from_"+a]).to_CIEXYZ.apply(e,c),{as:function(a){var c,e;c=(e=b.from_CIEXYZ)["to_"+a].apply(e,d);if(!g(c,a))throw"Color is out of the gamut of the requested color space";return c}}},typeof jQuery!="undefined"&&jQuery!==null&&(jQuery.colorspaces=f)}).call(this)